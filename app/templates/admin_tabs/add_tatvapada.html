<div class="container my-4">
    <div class="card border-info shadow-sm" style="border-width:2px;">
        <!-- Header -->
        <div class="card-header bg-info text-white fw-bold d-flex justify-content-between align-items-center"
            style="cursor:pointer; transition: background-color 0.3s, transform 0.3s;" data-bs-toggle="collapse"
            href="#instructionsCollapse" role="button" aria-expanded="false" aria-controls="instructionsCollapse"
            onmouseover="this.style.backgroundColor='#0dcaf0';" onmouseout="this.style.backgroundColor='#0d6efd';">
            <span>How to Use This Section</span>
            <i class="bi bi-chevron-down" style="transition: transform 0.3s;"></i>
        </div>

        <!-- Collapsible Content -->
        <div class="collapse" id="instructionsCollapse">
            <div class="card-body" style="background-color:#f8f9fa;">
                <!-- Adding a New Tatvapada -->
                <h6 class="fw-bold text-primary">Adding a New Tatvapada:</h6>
                <ul class="mb-3">
                    <li>Select <strong>"ಹೊಸ ತತ್ತ್ವಪದ ಸೇರಿಸಿ"</strong> to add a completely new entry.</li>
                    <li>Fill in the details: Tatvapadakosha title, Tatvapada title, author name, first line, and main
                        Tatvapada text.</li>
                    <li>Optional fields: Meaning (<em>ಭಾವಾನುವಾದ</em>), difficult words (<em>ಕ್ಲಿಷ್ಟ ಪದಗಳ ಅರ್ಥ</em>), and
                        notes (<em>ಟಿಪ್ಪಣಿ</em>).</li>
                    <li>Click <strong>ಸೇರಿಸಿ</strong> to save or <strong>ಮರುಹೊಂದಿಸಿ</strong> to reset the form.</li>
                </ul>

                <!-- Adding to Existing Collection -->
                <h6 class="fw-bold text-success">Adding Tatvapada to Existing Collection:</h6>
                <ul class="mb-3">
                    <li>Select <strong>"ಹಳೆಯ ಸಂಪುಟದಲ್ಲಿ ತತ್ತ್ವಪದ ಸೇರಿಸಿ"</strong>.</li>
                    <li>Choose the existing Samputa, author, and Tatvapada number from the dropdowns.</li>
                    <li>Edit other fields if needed and submit.</li>
                </ul>

                <!-- Bulk Upload via CSV -->
                <h6 class="fw-bold text-warning">Bulk Upload via CSV:</h6>
                <ul>
                    <li>Use the <strong>CSV Bulk Upload</strong> section below to upload multiple Tatvapada entries at
                        once.</li>
                    <li>Ensure your CSV file contains all required columns:</li>
                    <code
                        style="display:block; background-color:#e9ecef; padding:5px; border-radius:4px; margin-bottom:5px;">
            samputa_sankhye, tatvapadakosha_sheershike, tatvapadakarara_hesaru, vibhag, tatvapada_sheershike, tatvapada_sankhye, tatvapada_first_line, tatvapada, bhavanuvada, klishta_padagalu_artha, tippani
          </code>
                    <li>Click <strong>Upload CSV</strong> and wait for the success or error message.</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<main class="container mt-4">
    <h2 class="mb-4 text-center">ಹೊಸ ತತ್ತ್ವಪದ ಸೇರಿಸಿ</h2>

    <!-- Mode Selection -->
    <fieldset class="mb-4">
        <legend class="fw-bold mb-2">ಆಯ್ಕೆಮಾಡಿ:</legend>
        <div class="form-check">
            <input class="form-check-input" type="radio" name="add_tatvapada_entryMode" id="add_tatvapada_modeNew"
                value="new" checked />
            <label class="form-check-label" for="add_tatvapada_modeNew">ಹೊಸ ತತ್ತ್ವಪದ ಸೇರಿಸಿ</label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="radio" name="add_tatvapada_entryMode" id="add_tatvapada_modeExisting"
                value="existing" />
            <label class="form-check-label" for="add_tatvapada_modeExisting">ಹಳೆಯ ಸಂಪುಟದಲ್ಲಿ ತತ್ತ್ವಪದ ಸೇರಿಸಿ</label>
        </div>
    </fieldset>

    <!-- New Mode Inputs -->
    <div id="add_tatvapada_inputs_container" class="mb-4">
        <div class="mb-2">
            <input type="text" id="add_tatvapada_samputa_input" name="samputa" class="form-control mb-1"
                placeholder="ತತ್ವಪದಕೋಶ ಸಂಪುಟ ನಮೂದಿಸಿ" />
            <div id="add_tatvapada_samputa_suggestion" class="form-text text-warning small">
                ಈಗಾಗಲೇ ದಾಖಲಾಗಿರುವ ಸಂಪುಟಗಳು : <span id="add_tatvapada_samputa_suggestion_value"></span>
            </div>
        </div>

        <div class="mb-2">
            <input type="text" id="add_tatvapada_tatvapadakarara_hesaru_input_modeNew" name="tatvapadakarara_hesaru"
                class="form-control mb-1" placeholder="ತತ್ತ್ವಪದಕಾರರ ಹೆಸರು ನಮೂದಿಸಿ" />
        </div>

        <div class="mb-2">
            <input type="number" id="add_tatvapada_tatvapada_sankhye_input" name="tatvapada_sankhye"
                class="form-control mb-1" placeholder="ತತ್ತ್ವಪದ ಸಂಖ್ಯೆ ನಮೂದಿಸಿ" />
        </div>
    </div>

    <!-- Existing Mode Dropdowns -->
    <section id="add_tatvapada_cascading_section" class="add_tatvapada_dropdown_container mb-4" style="display: none;">
        <div class="row g-3">
            <!-- Samputa -->
            <div class="col-md-4">
                <label for="add_tatvapada_samputa" class="form-label">ಸಂಪುಟ</label>
                <select id="add_tatvapada_samputa" class="form-select">
                    <option value="" selected disabled>ತತ್ತ್ವಪದಕೋಶ ಸಂಪುಟ ಆಯ್ಕೆಮಾಡಿ</option>
                </select>
            </div>
            <!-- Author -->
            <div class="col-md-4">
                <label for="add_tatvapada_tatvapadakarara_hesaru" class="form-label">ತತ್ತ್ವಪದಕಾರರ ಹೆಸರು</label>
                <select id="add_tatvapada_tatvapadakarara_hesaru" class="form-select" disabled>
                    <option value="" selected disabled>ತತ್ತ್ವಪದಕಾರರ ಹೆಸರು</option>
                </select>
                <div id="add_tatvapada_inline_author_container" class="mt-2"></div>
            </div>
            <!-- Tatvapada Number -->
            <div class="col-md-4">
                <label for="add_tatvapada_tatvapada_sankhye" class="form-label">ತತ್ತ್ವಪದ ಸಂಖ್ಯೆ</label>
                <select id="add_tatvapada_tatvapada_sankhye" class="form-select" disabled>
                    <option value="" selected disabled>ತತ್ತ್ವಪದ ಸಂಖ್ಯೆ</option>
                </select>
                <div id="add_tatvapada_inline_sankhye_container" class="mt-2"></div>
            </div>
        </div>
    </section>

    <!-- Tatvapada Form -->
    <form id="add_tatvapada_form" novalidate>
        <!-- Inside your <form id="add_tatvapada_form"> ... -->
        <div class="row g-4 mt-2">
            <div class="col-md-4">
                <label for="add_tatvapada_tatvapadakosha_sheershike" class="form-label fw-bold">ತತ್ತ್ವಪದಕೋಶ
                    ಶೀರ್ಷಿಕೆ</label>
                <input type="text" id="add_tatvapada_tatvapadakosha_sheershike" name="tatvapadakosha_sheershike"
                    maxlength="150" class="form-control" placeholder="ಶಿಶುನಾಳ ಶರೀಫರ ತತ್ತ್ವಪದಗಳು" />
            </div>
            <div class="col-md-4">
                <label for="add_tatvapada_tatvapada_sheershike" class="form-label fw-bold">ತತ್ತ್ವಪದ ಶೀರ್ಷಿಕೆ</label>
                <input type="text" id="add_tatvapada_tatvapada_sheershike" name="tatvapada_sheershike" maxlength="100"
                    class="form-control" placeholder="ರಾಮಲಿಂಗಮೂರ್ತಿ ಸದ್ಗುರು" />
            </div>
            <div class="col-md-4">
                <label for="add_tatvapada_vibhag" class="form-label fw-bold">ವಿಭಾಗ</label>
                <input type="text" id="add_tatvapada_vibhag" name="vibhag" maxlength="150" class="form-control"
                    placeholder="ದೇವಸ್ತುತಿ" />
            </div>
            <div class="col-md-4">
                <label for="add_tatvapada_first_line" class="form-label fw-bold">ಮೊದಲ ಸಾಲು</label>
                <input type="text" id="add_tatvapada_first_line" name="tatvapada_first_line" maxlength="100"
                    class="form-control" placeholder="ಪಾಲಿಸಯ್ಯ ಪಾರ್ವತೀಪತಿ" />
            </div>
            <div class="col-12">
                <label for="add_tatvapada_tatvapada" class="form-label fw-bold">
                    ತತ್ತ್ವಪದ ಪದ್ಯ <span class="text-danger">*</span>
                </label>
                <textarea id="add_tatvapada_tatvapada" name="tatvapada" class="form-control" rows="6" required
                    placeholder="ಪಾಲಿಸಯ್ಯ ಪಾರ್ವತೀಪತಿ..."></textarea>
            </div>
            <div class="col-12">
                <label for="add_tatvapada_bhavanuvada" class="form-label fw-bold">ಭಾವಾನುವಾದ</label>
                <textarea id="add_tatvapada_bhavanuvada" name="bhavanuvada" class="form-control" rows="6"></textarea>
            </div>
            <div class="col-md-6">
                <label for="add_tatvapada_klishta_padagalu_artha" class="form-label fw-bold">ಕ್ಲಿಷ್ಟ ಪದಗಳ ಅರ್ಥ</label>
                <textarea id="add_tatvapada_klishta_padagalu_artha" name="klishta_padagalu_artha" class="form-control"
                    rows="3" placeholder="ಉದಾ: ವಿರತಿ = ತ್ಯಾಗ"></textarea>
            </div>
            <div class="col-md-6">
                <label for="add_tatvapada_tippani" class="form-label fw-bold">ಟಿಪ್ಪಣಿ</label>
                <textarea id="add_tatvapada_tippani" name="tippani" class="form-control" rows="3"></textarea>
            </div>
        </div>


        <div class="text-center mt-4 mb-5">
            <button type="submit" class="btn btn-success me-2">ಸೇರಿಸಿ</button>
            <button type="reset" class="btn btn-secondary">ಮರುಹೊಂದಿಸಿ</button>
        </div>
    </form>




</main>
<div class="container my-5 csv-uploader-container">
    <div class="card shadow-sm">
        <div class="card-body">
            <h2 class="card-title text-center mb-4">Bulk Upload Tatvapada via CSV</h2>
            <p class="text-center text-muted mb-4">
                Upload your CSV file containing tatvapada entries. Ensure the required columns are included.
            </p>

            <form id="bulk_upload_form" enctype="multipart/form-data" novalidate>
                <div class="mb-3">
                    <label for="bulk_upload_file" class="form-label fw-bold">Select CSV File</label>
                    <input class="form-control" type="file" id="bulk_upload_file" name="file" accept=".csv" required />
                    <div class="form-text">
                        Required columns: <code>samputa_sankhye, tatvapadakosha_sheershike, tatvapadakarara_hesaru, vibhag,
                        tatvapada_sheershike, tatvapada_sankhye, tatvapada_first_line, tatvapada, bhavanuvada,
                        klishta_padagalu_artha, tippani</code>
                    </div>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn btn-primary btn-lg">
                        Upload CSV
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="bulk_upload_successModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content p-4">
                <div class="text-center">
                    <h5 class="text-success">Upload Successful!</h5>
                    <p id="bulk_upload_successMessage" class="mt-2"></p>
                    <button type="button" class="btn btn-success mt-3" data-bs-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal fade" id="bulk_upload_errorModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content p-4">
                <div class="text-center">
                    <h5 class="text-danger">Upload Failed!</h5>
                    <p id="bulk_upload_errorMessage" class="mt-2"></p>
                    <button type="button" class="btn btn-danger mt-3" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Modals -->
<div class="modal fade" id="add_tatvapada_successModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content p-4 text-center">
            <h5 class="text-success">ಯಶಸ್ವಿ!</h5>
            <p>ತತ್ತ್ವಪದ ಯಶಸ್ವಿಯಾಗಿ ಸೇರಿಸಲಾಗಿದೆ.</p>
            <p id="add_tatvapada_successMessage" class="mt-2 text-muted"></p>
            <button type="button" class="btn btn-success mt-3" data-bs-dismiss="modal">ಸರಿ</button>
        </div>
    </div>
</div>

<div class="modal fade" id="add_tatvapada_errorModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content p-4 text-center">
            <h5 class="text-danger">ದೋಷ!</h5>
            <p>ತತ್ತ್ವಪದವನ್ನು ಸೇರಿಸಲು ಸಾಧ್ಯವಾಗಿಲ್ಲ.</p>
            <p id="add_tatvapada_errorMessage" class="mt-2 text-muted"></p>
            <button type="button" class="btn btn-danger mt-3" data-bs-dismiss="modal">ಮುಚ್ಚಿ</button>
        </div>
    </div>
</div>